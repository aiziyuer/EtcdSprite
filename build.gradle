/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.3/userguide/tutorial_java_projects.html
 */

// Apply the java plugin to add support for Java
apply plugin: 'java'

apply plugin: 'application'

// In this section you declare where to find the dependencies of your project
repositories {
    jcenter()
    maven {url 'repo'}
}

String swtGroupId='org.eclipse.swt', swtVersion='3.7.2'
def osDependencies = []
if (org.gradle.internal.os.OperatingSystem.current().isWindows()) {

    // 区分32位和64位
    String arch = System.getenv("PROCESSOR_ARCHITECTURE")
    String wow64Arch = System.getenv("PROCESSOR_ARCHITEW6432")
    String is64Arch = (arch != null && arch.endsWith("64")) \
                   || (wow64Arch != null && wow64Arch.endsWith("64")) ? "64" : "32"

    if(is64Arch) {
        osDependencies<<String.format("%s:%s:%s", swtGroupId, 'org.eclipse.swt.win32.win32.x86_64', swtVersion)
    }
    else {
        osDependencies<<String.format("%s:%s:%s", swtGroupId, 'org.eclipse.swt.win32.win32.x86', swtVersion)
    }

} else {

    // 全部编译
    osDependencies<<String.format("%s:%s:%s", swtGroupId, 'org.eclipse.swt.win32.win32.x86', swtVersion)
    osDependencies<<String.format("%s:%s:%s", swtGroupId, 'org.eclipse.swt.win32.win32.x86_64', swtVersion)
}


dependencies {
    // The production code uses Guava
    compile 'com.google.guava:guava:20.0'

    // 系统相关的依赖
    compile osDependencies

    // Use JUnit test framework
    testCompile 'junit:junit:4.12'
}


build{
    mainClassName = "com.aiziyuer.app.CoreApplication"
    applicationDefaultJvmArgs = ["-Dgreeting.language=en"]
}